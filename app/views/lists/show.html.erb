<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2340&q=80);">
  <div class="container">
    <h1 class="text-center"><%= @list.name %> Movies</h1>
  </div>
</div>
<div class="container">
  <div class="list-container p-3 d-flex justify-content-center flex-wrap gap-3">
      <% @movies.each do |movie| %>
        <div class="card-product">
          <%= image_tag movie.poster_url, alt: "#{movie.title} Poster" %>
          <div class="card-product-infos">
            <h2 class="text-end"><i class="fa-solid fa-star text-warning"></i> <%= movie.rating %></h2>
            <h2><%= movie.title %></h2>
            <p><%= movie.overview %></p>
            <% bookmark = Bookmark.find_by(list: @list, movie: movie) %>
              <p><i class="fa-solid fa-quote-left"></i> <%= bookmark.comment %> <i class="fa-solid fa-quote-right"></i></p>
              <p class="text-end"><%= link_to bookmark_path(bookmark),
                data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} do %>
                <i class="fa-solid fa-trash text-danger fs-4"></i>
            <% end %>
              </p>
          </div>
        </div>
      <% end %>
    </ul>
  </div>
  <div class="form-container w-50 mt-4 d-flex flex-column justify-content-center">
    <h5 class="mt-3">Add a new movie</h5>
    <%= simple_form_for [@list, @bookmark] do |f| %>
      <%= f.association :movie, prompt: "Choose a movie", label: false, input_html: { class: 'w-50', multiple: true, data: {controller: "tom-select"}} %>
      <%= f.input :comment, label: false, placeholder: 'What do you think of the movie?', input_html: { class: 'w-100' } %>
      <%= f.submit class: 'btn btn-primary'%>
    <% end %>
  </div>
</div>
